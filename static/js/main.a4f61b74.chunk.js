(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[,,,,,,,,,,function(e,t,n){e.exports=n(22)},,,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var r=n(0),s=n.n(r),i=n(9),a=n.n(i),o=n(7),c=n(2),u=n(3),l=n(5),h=n(4),m=n(1),d=n(6),p=(n(16),function(e){var t=e.scores,n=e.handleRefresh;return s.a.createElement("div",{className:"heads-up-display"},s.a.createElement("div",{id:"user-score"},s.a.createElement("div",null,t.user),s.a.createElement("div",null,"User")),s.a.createElement("div",{id:"cpu-score"},s.a.createElement("div",null,t.cpu),s.a.createElement("div",null,"CPU")),s.a.createElement("div",{id:"controls"},s.a.createElement("button",{onClick:n},"Restart")))}),f=(n(17),function(e){var t=e.user;return s.a.createElement("div",{className:"token ".concat(t)})}),v=(n(18),function(e){var t=e.user;return s.a.createElement("div",{className:"slot"},t&&s.a.createElement(f,{user:t}))}),b=function(e){var t=e.slotStates,n=e.ind,r=e.onClick,i=t.every(function(e){return void 0!==e}),a=t.map(function(e,t){return s.a.createElement(v,{key:t,user:e})});return s.a.createElement("div",{className:"column ".concat(i?"closed":"open"),onClick:function(){return r(n)}},a)},w=(n(19),function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(l.a)(this,Object(h.a)(t).call(this,e))).state={currentUser:"user"},n.handleUserColSelect=n.handleUserColSelect.bind(Object(m.a)(n)),n.getUpdatedColumnList=n.getUpdatedColumnList.bind(Object(m.a)(n)),n.isWinner=n.isWinner.bind(Object(m.a)(n)),n.handleAdvanceTurn=n.handleAdvanceTurn.bind(Object(m.a)(n)),n.setCPUMove=n.setCPUMove.bind(Object(m.a)(n)),n}return Object(d.a)(t,e),Object(u.a)(t,[{key:"handleUserColSelect",value:function(e){"user"!==this.state.currentUser||this.props.isClosed||this.props.columns[e].some(function(e){return void 0===e})&&this.handleAdvanceTurn(this.getUpdatedColumnList(e))}},{key:"getUpdatedColumnList",value:function(e){for(var t=this.props.factorDepth-1,n=0;n<=t;n++)if(void 0!==this.props.columns[e][n]){t=n-1;break}var r=this.props.columns[e];r[t]=this.state.currentUser;var s=this.props.columns;return s[e]=r,s}},{key:"isWinner",value:function(){var e=this;return[function(t){return e.props.columns.every(function(n,r){return e.props.columns[r][r]===t})},function(t){return e.props.columns.every(function(n,r){return e.props.columns[r][e.props.factorDepth-1-r]===t})},function(t){for(var n=[],r=function(e,n){return e===t?n:null},s=function(e){return null!==e},i=function(e){return 0===n.length||n.indexOf(e)>-1},a=0;a<e.props.factorDepth;a++){var o=e.props.columns[a].map(r).filter(s);if(0===o.length)return!1;if(0===(n=o.filter(i)).length)return!1}return!0},function(t){return e.props.columns.some(function(n,r){return e.props.columns[r].every(function(e){return e===t})})}].some(function(t){return t(e.state.currentUser)})}},{key:"handleAdvanceTurn",value:function(e){var t=this;console.log("handleAdvanceTurn"),this.props.incrementScore(this.state.currentUser,1);var n=this.isWinner();n&&this.props.handleWinner(this.state.currentUser);var r="user"===this.state.currentUser?"cpu":"user";this.setState({currentUser:r},function(){var e=t.props.columns.map(function(e,t){return e.some(function(e){return void 0===e})?t:null}).filter(function(e){return null!==e});"cpu"===t.state.currentUser&&(n?window.setTimeout(t.setCPUMove,2*t.props.closeOutTime):t.setCPUMove()),"user"!==t.state.currentUser||0!==e.length||t.props.handleTie()})}},{key:"setCPUMove",value:function(){var e=this,t=this.props.columns.map(function(e,t){return e.some(function(e){return void 0===e})?t:null}).filter(function(e){return null!==e});if(console.log("setCPUMove",t),0!==t.length){var n=t[Math.floor(Math.random()*t.length)];window.setTimeout(function(){return e.handleAdvanceTurn(e.getUpdatedColumnList(n))},400)}else this.props.handleTie()}},{key:"render",value:function(){var e=this,t=this.props.columns.map(function(t,n){return s.a.createElement(b,{key:n,ind:n,onClick:e.handleUserColSelect,slotStates:t})});return s.a.createElement("div",{className:"columns-container",style:{gridTemplateColumns:"repeat(".concat(this.props.factorDepth,", 64px)")}},t)}}]),t}(r.Component)),C=(n(20),function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(l.a)(this,Object(h.a)(t).call(this,e))).state={containerClassNames:""},n.transitionTime=400,n}return Object(d.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=function(){return window.setTimeout(function(){return e.setState({containerClassNames:"closed"})},e.props.closeOutTime-e.transitionTime)};window.setTimeout(function(){return e.setState({containerClassNames:"open"},t)},50)}},{key:"render",value:function(){return s.a.createElement("div",{className:"modal-container".concat(""!==this.state.containerClassNames?" "+this.state.containerClassNames:"")},s.a.createElement("div",{className:"modal"},this.props.children))}}]),t}(r.Component)),O=(n(21),function(e){function t(){var e;return Object(c.a)(this,t),(e=Object(l.a)(this,Object(h.a)(t).call(this))).initFactorDepth=3,e.initScores={user:0,cpu:0},e.initState={showGameBoard:!0,factorDepth:e.initFactorDepth,scores:e.initScores,winner:void 0,columns:e.getNewColumns()},e.state=e.initState,e.closeOutTime=2500,e.handleWinner=e.handleWinner.bind(Object(m.a)(e)),e.getNewColumns=e.getNewColumns.bind(Object(m.a)(e)),e.incrementScore=e.incrementScore.bind(Object(m.a)(e)),e.handleRefresh=e.handleRefresh.bind(Object(m.a)(e)),e}return Object(d.a)(t,e),Object(u.a)(t,[{key:"getNewColumns",value:function(e){var t={length:void 0!==e?e:this.state?this.state.factorDepth+1:this.initFactorDepth};return Array.from(t,function(e){return Array.from(t,function(e){})})}},{key:"incrementScore",value:function(e,t){var n,r="user"===e?"cpu":"user",s=(n={},Object(o.a)(n,e,this.state.scores[e]+(t||1)),Object(o.a)(n,r,this.state.scores[r]),n);this.setState({scores:s})}},{key:"handleWinner",value:function(e){var t=this,n=2*this.state.factorDepth,r="tie"===e?-n:1,s={user:"user"===e?this.state.scores.user+n:this.state.scores.user+r,cpu:"cpu"===e?this.state.scores.cpu+n:this.state.scores.cpu+r};this.setState({winner:e,scores:s},function(){return window.setTimeout(function(){return t.handleRefresh("tie"===e?-1:1)},t.closeOutTime)})}},{key:"handleRefresh",value:function(e){var t=this;console.log("handleRefresh",e);var n=e?this.state.factorDepth+e:this.initFactorDepth,r=e?this.state.scores:this.initScores,s=Object.assign({},this.initState,{showGameBoard:!1,factorDepth:n,columns:this.getNewColumns(n),scores:r});console.log("toggleState",s),this.setState(s,function(){window.setTimeout(function(){return t.setState({showGameBoard:!0})},10)})}},{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"app"},s.a.createElement("div",{id:"display"},s.a.createElement(p,{scores:this.state.scores,handleRefresh:function(){return e.handleRefresh()}}),this.state.showGameBoard&&s.a.createElement(w,{isClosed:void 0!==this.state.winner,factorDepth:this.state.factorDepth,columns:this.state.columns,incrementScore:this.incrementScore,handleWinner:this.handleWinner,handleTie:function(){return e.handleWinner("tie")},closeOutTime:this.closeOutTime})),this.state.winner&&s.a.createElement(C,{closeOutTime:this.closeOutTime},s.a.createElement("p",null,"tie"===this.state.winner?"Tie...":"Winner!"),s.a.createElement("p",null,"tie"===this.state.winner?":-(":this.state.winner)))}}]),t}(r.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a.a.render(s.a.createElement(O,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}],[[10,1,2]]]);
//# sourceMappingURL=main.a4f61b74.chunk.js.map